---
draft: false
title: 2020 오픈소스 컨트리뷰톤 후기
description: 오픈소스에 기여하며 배운 것
slug: 2020-contributon
date: 2020-12-06T14:27:11.438Z
tags:
  - 오픈소스
  - rust
categories:
  - open-source
---
 블로그를 완성한 기념을 겸하여, 2020 오픈소스 컨트리뷰톤에 참여한 경험에 대해 글로 남겨보려 합니다. 제가 참여한 프로젝트는 정윤원 멘토님이 담당하시는 RustPython 프로젝트인데, Rust로 Python 인터프리터를 작성하는 야심 넘치는 프로젝트입니다.

# 시작

RustPython이 공식 소통 채널로 Gitter을 이용하기에 저희 팀도 Gitter을 이용하게 되었습니다. 첫 미션은 `cargo run --release -- -m test` 실행 결과를 Gitter 채팅방에 알리는 것이었습니다. 저는 부푼 마음을 안고 커맨드를 실행했는데... 

![테스트가 실패한 사진](/images/uploads/1.png)

Python의 기능이 윈도우에서 전부 구현되지 않은 탓에 테스트조차 제대로 동작하지 않았습니다. 하지만 그리 나쁜 일은 아니었는데, 덕분에 어느 부분부터 기여해야 할 지를 빠르게 찾을 수 있었기 때문이었죠.

저는 테스트가 실패하는 원인을 찾아내 미구현된 부분을 구현하는 것으로 기여를 시작했습니다.

# sys.getwindowsversion

[getwindowsversion](https://docs.python.org/3.8/library/sys.html#sys.getwindowsversion) 은 윈도우용 파이썬에만 존재하는 함수로, 사용자가 실행 중인 윈도우 버전 정보를 찾아 제공하는 함수입니다. WinAPI의 [GetVersionExW](https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/nf-sysinfoapi-getversionexw)와 같은 기능을 하므로 이 함수를 실행시켜 결과만 반환해주면 되는 작업이었습니다.

![버그 제보를 위해 열었던 이슈](/images/uploads/getwindowsversion-issue.png)

간단하게 어떻게 버그가 발생하는지, 그 원인은 무엇인지 (필수는 아님), 그리고 관련 자료만 언급해주면 충분히 잘 쓴 이슈 하나가 완성됩니다. 이후 멘토님이 이슈에 어떻게 고치면 되는지, 어디부터 시작하면 되는지를 알려주셨는데 덕분에 코드를 읽으며 어느 부분에 코드를 추가해야 하는지 고민하는 시간을 확 줄일 수 있었어요.

몇 번 메인테이너와 멘토님에게 질문을 하며 코드를 고친 뒤 [PR을 올렸는데](https://github.com/RustPython/RustPython/pull/2002), 멘토님이 테스트 코드를 넣어보는 것을 제안해주셨습니다. 어느 부분에 테스트를 넣을 지도 알려주셨는데, 테스트 코드를 써본 적이 없어 많이 우왕좌왕하다 멘토님의 도움으로 간단하게 테스트를 완성해 제출해 승인되었습니다.

# 발대식

사실 위 PR을 만들고 있을 때만 해도 아직 공식적으로 컨트리뷰톤 기간은 아니었는데, 7월 25일에 발대식을 한다는 연락을 받았습니다. 당시에 코로나 상황이 조금 안정되었던 시기라 오프라인으로 멘토님과 멘티 분들을 만날 수 있었는데, 현업에서 일하시는 분들이 많았던 기억이 납니다.

발대식은 주최 기관인 Open UP에서 진행되었는데, 컨트리뷰톤에 어떤 마음가짐을 가지고 참여하면 좋은가와 같은 이야기부터 GitHub의 활용법과 같은 실용적인 부분까지 잘 만들어져 있다고 생각했습니다. 이후에 멘토님이 나와서 RustPython에 대한 소개와 기여 방법에 대해 간단히 알려주시고 멘티분들에게 적절한 이슈를 직접 찾아주셨습니다. 이때 위 PR을 만든 이야기로 칭찬받았던 기억이 나네요!

# 테스트 굴러가게 하기

사실 이제 윈도우 말고 다른 부분에 기여하고 싶었는데, 다른 멘티분들이 빠르게 작업을 끝내시기도 했고 일단 테스트가 안 돌아가 잘 작동하는 지 확인부터 어려웠던 상황이었기에 윈도우 환경에서 테스트를 동작시키는 데 다시 집중하게 되었습니다.

그 이후로 저는 테스트를 정상적으로 작동시키게 하는 데 주로 기여를 시작했습니다. 파이썬에는 윈도우에만 제공되는 [msvcrt](https://docs.python.org/3.8/library/msvcrt.html) 모듈이 있는데, 윈도우에서만 제공되는 모듈로 Microsoft가 만든 C 표준 구현체와 일부 Windows 전용 기능을 제공합니다. 

![4개의 각기 다른 Visual C++ Redistributable이 설치된 모습.](https://www.howtogeek.com/wp-content/uploads/2016/05/xc_1-650x495.png.pagespeed.gp+jp+jw+pj+ws+js+rj+rp+rw+ri+cp+md.ic.CStp5Wwbpz.png)

제 목표였던 Python 테스트 케이스는 윈도우 환경에서 실행할 때 msvcrt 모듈을 이용해서 설정을 조정하는 기능이 있었는데, 사실 테스트 준비용 코드여서 그냥 해당 부분을 삭제하는 것도 고민해봤지만 테스트케이스를 가능하면 그대로 두고 싶었고 구현도 어렵지 않았기에 필요한 함수 하나만 구현했습니다.

# os 함수 구현하기

이제 테스트가 돌아갑니다! 문제는 테스트가 성공하진 않는다는 거죠. 여러 테스트가 잘 동작하지 않았습니다만 그 중 os 모듈은 특성상 각 OS마다 따로 구현되어 있는데, 이번에도 Windows 구현체는 다른 구현체에 비해 구현된 함수가 부족하여 생긴 참사였습니다.

아쉽게도 제 능력의 부족으로 모든 부족한 함수를 구현하진 못했지만, 일부 함수를 구현했습니다. 각각 `chmod`, `waitpid`, `execv`였어요!

![chmod, waitpid, execv PR](/images/uploads/prs.png)

execv는 감사하게도 다른 멘티분이 구현한 PR이 있었기에 그 분의 PR을 참고하여 Windows 환경에 알맞게 수정을 가했습니다.

# 발표자에 당첨되셨습니다

PR을 여러 개 보내고 나니 조금 지쳐 쉬고 있던 차에 멘토님에게 최종 평가용 발표를 해보는 게 어떻냐는 제안을 받았습니다.  (사실 제가 쉬고 있어서 연락을 한 줄 알았긴 했지만요) 

그 뒤로 다른 멘티 분 한분과 멘토님과 디스코드 그룹을 파고 발표에 뭘 넣어야 하는지 이야기를 한 뒤  발표 자료를 혼자 만들었는데 솔직히 전혀 진도가 나가지 않았어요. 그렇게 혼자서 좀 끙끙대다가 결국 도움을 받았는데, 정말 고맙게도 두 분이 열심히 도와주셨습니다. 두 분의 도움이 아니었다면 그런 멋진 프레젠테이션은 만들지 못하지 않았을까 지금도 생각합니다.